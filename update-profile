# TODO make this update/overwrite the values for:
#HISTSIZE=-1
#HISTFILESIZE=-1

######
# Updating aliases
# It has been observed that .bash_aliases is named .alias in systems like openSUSE, so we prefer to use .bash_aliases_jh just to keep it agnostic from every different distribution.
######
cp $( dirname "${BASH_SOURCE[0]}")/.bash_aliases_jh ~/.bash_aliases_jh
. ~/.bash_aliases_jh
# Removing the line if it already exists.
sed -i '/\.bash_aliases_jh/d' ~/.bashrc
echo "test -s ~/.bash_aliases_jh && . ~/.bash_aliases_jh || true" >> ~/.bashrc
test -s ~/.bash_aliases && echo "WARNING: .bash_aliases already exists. Check if there are old definitions to delete there."
test -s ~/.alias && echo "WARNING: .alias already exists. Check if there are old definitions to delete there."
echo ".bash_aliases_jh updated"

#######
# Updating authorized SSH keys
#######
mkdir -p ~/.ssh/
# TODO check: maybe we should append instead of fully replace?.
cp $( dirname "${BASH_SOURCE[0]}")/authorized_keys ~/.ssh/authorized_keys
chmod 700 ~/.ssh
chmod 600 ~/.ssh/authorized_keys
# TODO indicate if authorized_keys was "updated" or "overwritten"
echo "SSH authorized keys updated"

######
# Screen configuration
######

# TODO try to include a custom ~/.screenrc_jh from the main ~/.screenrc instead of overwriting
cp $( dirname "${BASH_SOURCE[0]}")/.screenrc ~/.screenrc
# TODO indicate if this file was "updated" or "overwritten"
echo "~/.screenrc updated"

# Starting screen automatically on login
sed -i '/screen -R/d' ~/.profile
echo 'if [ -z "$STY" ]; then screen -R; fi' >> ~/.profile
echo "screen configured to be automatically executed on login"
